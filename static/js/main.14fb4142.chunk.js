(this["webpackJsonpcontentstack-react-starter-app"]=this["webpackJsonpcontentstack-react-starter-app"]||[]).push([[0],{153:function(e,t){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var c,a=n(179),i=n(2),o=n(103),r=n.n(o),s=n(13),l=n(27),d=n(7),j=n(10),b=n(88),u=n(104),h=n(119).Stack({api_key:"bltf9720f7949da78d3",delivery_token:"cs4d71fdc649f544913a7a723d",environment:"dev"});Object({NODE_ENV:"production",PUBLIC_URL:"/contentstack-assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIKEY:"bltf9720f7949da78d3",REACT_APP_DELIVERY_TOKEN:"cs4d71fdc649f544913a7a723d",REACT_APP_ENVIRONMENT:"dev"}).REACT_APP_CUSTOM_HOST&&h.setHost(Object({NODE_ENV:"production",PUBLIC_URL:"/contentstack-assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIKEY:"bltf9720f7949da78d3",REACT_APP_DELIVERY_TOKEN:"cs4d71fdc649f544913a7a723d",REACT_APP_ENVIRONMENT:"dev"}).REACT_APP_CUSTOM_HOST);var O=n(75),m=O.ApolloClient,v=O.InMemoryCache,x=O.HttpLink,f=O.from,_=O.gql,p="https://graphql.contentstack.com/stacks/".concat("bltf9720f7949da78d3","?environment=").concat("dev"),g=new v,k=new m({link:f([new x({uri:p,headers:{access_token:"cs4d71fdc649f544913a7a723d"}})]),cache:g}),N=_(c||(c=Object(u.a)(["\n  query HomeData($skip: Int, $limit: Int) {\n    all_header {\n      items {\n        navigation_menu {\n          link {\n            href\n            title\n          }\n        }\n        logoConnection {\n          edges {\n            node {\n              filename\n              url\n            }\n          }\n        }\n        notification_bar {\n          rich_text_editor\n          show_announcement\n        }\n      }\n    }\n    all_book_page(limit: $limit, skip: $skip, order_by: created_at_ASC) {\n      total\n      items {\n        book_data {\n          amazon_link {\n            href\n          }\n          book_author\n          book_description\n          book_pages\n          book_title\n          book_coverConnection {\n            edges {\n              node {\n                url\n              }\n            }\n          }\n        }\n        url\n        system {\n          uid\n        }\n      }\n    }\n  }\n"])));var y={getAllBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return k.query({query:N,variables:{skip:e,limit:t}})},getEntryByUrl:function(e,t,n){return new Promise((function(c,a){var i=h.ContentType(e).Query();n&&i.includeReference(n),i.includeOwner().toJSON(),i.where("url","".concat(t)).find().then((function(e){c(e[0])}),(function(e){a(e)}))}))},homeDataQuery:N,client:k};function E(e){return e.edges[0].node}var C=n(3);function S(e){var t=e.amazon_link,n=e.book_author,c=e.book_cover,a=e.book_description,i=e.book_pages,o=e.book_title,r=e.pageNum,l=e.url;return Object(C.jsxs)("div",{style:{display:"flex",marginBottom:50},children:[Object(C.jsxs)("div",{className:"cards",children:[Object(C.jsxs)(s.b,{to:{pathname:l,state:{pageNum:r}},children:[Object(C.jsx)("img",{src:c.url,alt:o,width:100}),Object(C.jsx)("h3",{children:o})]}),Object(C.jsxs)("span",{children:["Author(s): ",n]}),Object(C.jsxs)("span",{style:{marginBottom:20},children:[i," pages"]}),Object(C.jsx)("a",{href:t.href,children:"Buy this book on Amazon"})]}),Object(C.jsx)("p",{className:"cards",children:a})]})}var T=n(65),A=n.n(T);function P(e){var t,n,c=e.footer;return Object(C.jsxs)("footer",{children:[Object(C.jsxs)("div",{className:"max-width footer-div",children:[Object(C.jsx)("div",{className:"col-quarter",children:Object(C.jsx)(s.b,{to:"/",children:c.logo&&Object(C.jsx)("img",{src:c.logo.url,alt:"contentstack logo",title:"contentstack",className:"logo footer-logo"})})}),Object(C.jsx)("div",{className:"col-half",children:Object(C.jsx)("nav",{children:Object(C.jsx)("ul",{className:"nav-ul",children:null===(t=c.navigation.link)||void 0===t?void 0:t.map((function(e){return Object(C.jsx)("li",{className:"footer-nav-li",children:Object(C.jsx)(s.b,{to:e.href,children:e.title})},e.title)}))})})}),Object(C.jsx)("div",{className:"col-quarter social-link",children:Object(C.jsx)("div",{className:"social-nav",children:null===(n=c.social.social_share)||void 0===n?void 0:n.map((function(e){return Object(C.jsx)("a",{href:e.link.href,title:e.link.title,children:Object(C.jsx)("img",{src:e.icon.url,alt:"social icon"})},e.link.title)}))})})]}),Object(C.jsx)("div",{className:"copyright",children:A()(c.copyright)})]})}function w(e){var t=e.header;return Object(C.jsxs)("header",{className:"header",children:[t.notification_bar.show_announcement&&Object(C.jsx)("div",{className:"note-div",children:A()(t.notification_bar.rich_text_editor)}),Object(C.jsxs)("div",{className:"max-width header-div",children:[Object(C.jsx)("div",{className:"wrapper-logo",children:Object(C.jsx)(s.b,{to:"/",title:"Contentstack",children:Object(C.jsx)("img",{className:"logo",src:t.logo.url,alt:t.logo.filename})})}),Object(C.jsx)("input",{className:"menu-btn",type:"checkbox",id:"menu-btn"}),Object(C.jsx)("label",{className:"menu-icon",htmlFor:"menu-btn",children:Object(C.jsx)("span",{className:"navicon"})}),Object(C.jsx)("nav",{className:"menu",children:Object(C.jsx)("ul",{className:"nav-ul header-ul",children:t.navigation_menu.link.map((function(e){return Object(C.jsx)("li",{className:"nav-li",children:Object(C.jsx)(s.b,{to:e.href,children:e.title})},e.title)}))})})]})]})}function R(e){var t=e.footer,n=e.children,c=e.header;return Object(C.jsxs)(C.Fragment,{children:[c?Object(C.jsx)(w,{header:c}):null,Object(C.jsx)("main",{children:n}),t?Object(C.jsx)(P,{footer:t}):null]})}var D=function(){var e=Object(d.g)().state,t=(e=void 0===e?{}:e).pageNum,n=void 0===t?1:t,c=Object(i.useState)(n),a=Object(j.a)(c,2),o=a[0],r=a[1],s=Object(i.useState)([]),u=Object(j.a)(s,2),h=u[0],O=u[1],m=Object(b.a)(y.homeDataQuery,{variables:{limit:5,skip:5*(o-1)}}),v=m.data,x=(v=void 0===v?{}:v).all_header,f=(x=void 0===x?{}:x).items;f=void 0===f?[{}]:f;var _=Object(j.a)(f,1)[0],p=v.all_book_page,g=(p=void 0===p?{}:p).items,k=void 0===g?[]:g,N=p.total,T=void 0===N?0:N,A=m.refetch,P=m.loading,w=m.error,D=_.logoConnection?E(_.logoConnection):{};return Object(i.useEffect)((function(){k.length&&O(k)}),[k]),P?Object(C.jsx)("div",{children:"Loading..."}):w?Object(C.jsx)(d.a,{to:"/error"}):Object(C.jsxs)(R,{header:Object(l.a)(Object(l.a)({},_),{},{logo:D}),children:[Object(C.jsx)("ul",{style:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){var t=e.book_data,n=e.url,c=e.system.uid,a=E(t.book_coverConnection),i=Object(l.a)(Object(l.a)({},t),{},{uid:c,pageNum:o,book_cover:a});return Object(C.jsx)("li",{children:Object(C.jsx)(S,Object(l.a)(Object(l.a)({},i),{},{url:n}))},t.book_title)}))}),Object(C.jsxs)("div",{style:{width:300,padding:50,margin:"0 auto",display:"flex"},children:[Object(C.jsx)("button",{onClick:function(){var e=Math.max(1,o-1);r(e),A({skip:5*(e-1)})},style:{flexBasis:"50%"},disabled:1===o,children:"Previous"}),Object(C.jsx)("button",{onClick:function(){r(o+1),A({skip:5*o})},style:{flexBasis:"50%"},disabled:T-5*o<=0,children:"Next"})]})]})},B=n(81),I=n.n(B),F=n(107);function H(){var e=Object(d.g)(),t=e.pathname,n=e.state,c=(n=void 0===n?{}:n).pageNum,a=Object(i.useState)(),o=Object(j.a)(a,2),r=o[0],l=o[1],b=Object(i.useState)({errorStatus:!1,errorCode:void 0,errorData:void 0}),u=Object(j.a)(b,2),h=u[0],O=u[1];if(Object(i.useEffect)(Object(F.a)(I.a.mark((function e(){var n,c,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getEntryByUrl("book_page",t);case 3:n=e.sent,c=Object(j.a)(n,1),a=c[0].book_data,l(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O({errorStatus:!0,errorCode:404,errorData:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),h.errorStatus)return Object(C.jsx)("div",{children:"Something went wrong"});if(!r)return Object(C.jsx)("div",{children:"Loading..."});var m=r.amazon_link,v=r.book_author,x=r.book_cover,f=r.book_description,_=r.book_pages,p=r.book_title;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"btn-wrapper",children:Object(C.jsx)(s.b,{to:{pathname:"/",state:{pageNum:c}},className:"btn primary-btn",children:"Back"})}),Object(C.jsxs)("div",{style:{margin:"0 auto",width:"80%",display:"flex",flexDirection:"column"},children:[Object(C.jsx)("h1",{children:p}),Object(C.jsxs)("div",{style:{display:"flex"},children:[Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingRight:50},children:[Object(C.jsx)("img",{src:x.url,alt:p,width:250}),Object(C.jsxs)("span",{children:["Author(s): ",v]}),Object(C.jsxs)("span",{children:[_," pages"]})]}),Object(C.jsxs)("div",{style:{flexBasis:"30%"},children:[Object(C.jsx)("p",{children:f}),Object(C.jsx)("a",{href:m.href,children:"Buy this book on Amazon"})]})]})]})]})}n(172),n(173);var L=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(d.d,{children:[Object(C.jsx)(d.b,{exact:!0,path:"/",render:function(e){return Object(C.jsx)(D,Object(l.a)({},e))}}),Object(C.jsx)(d.b,{exact:!0,path:"/:id",render:function(e){return Object(C.jsx)(H,Object(l.a)({},e))}})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,181)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};r.a.render(Object(C.jsx)(a.a,{client:y.client,children:Object(C.jsx)(s.a,{basename:"/",children:Object(C.jsx)(L,{})})}),document.getElementById("root")),K()}},[[174,1,2]]]);
//# sourceMappingURL=main.14fb4142.chunk.js.map