(this["webpackJsonpcontentstack-react-starter-app"]=this["webpackJsonpcontentstack-react-starter-app"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(49),o=n.n(c),s=n(10),i=n(9),l=n(3),d=n(12),u=n.n(d),j=n(17),b=n(5),O=n(50),h=n(62).Stack({api_key:"bltf9720f7949da78d3",delivery_token:"cs4d71fdc649f544913a7a723d",environment:"dev"});Object({NODE_ENV:"production",PUBLIC_URL:"/contentstack-assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIKEY:"bltf9720f7949da78d3",REACT_APP_DELIVERY_TOKEN:"cs4d71fdc649f544913a7a723d",REACT_APP_ENVIRONMENT:"dev"}).REACT_APP_CUSTOM_HOST&&h.setHost(Object({NODE_ENV:"production",PUBLIC_URL:"/contentstack-assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIKEY:"bltf9720f7949da78d3",REACT_APP_DELIVERY_TOKEN:"cs4d71fdc649f544913a7a723d",REACT_APP_ENVIRONMENT:"dev"}).REACT_APP_CUSTOM_HOST);var p=n(116),f=p.ApolloClient,v=p.InMemoryCache,x=p.HttpLink,_=p.from,m=p.gql,k="https://graphql.contentstack.com/stacks/".concat("bltf9720f7949da78d3","?environment=").concat("dev"),g=new v,S=new f({link:_([new x({uri:k,headers:{access_token:"cs4d71fdc649f544913a7a723d"}})]),cache:g});var y={getAllBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return S.query({query:m(r||(r=Object(O.a)(["query {\n      all_book_page(limit: 5, skip: ",", order_by: created_at_ASC) {\n        total\n        items {\n          book_data {\n            amazon_link {\n              href\n            }\n            book_author\n            book_description\n            book_pages\n            book_title\n            book_coverConnection {\n              edges {\n                node {\n                  url\n                }\n              }\n            }\n          }\n          url\n          system {\n            uid\n          }\n        }\n      }\n    }\n    "])),e)})},getEntryByUrl:function(e,t,n){return new Promise((function(r,a){var c=h.ContentType(e).Query();n&&c.includeReference(n),c.includeOwner().toJSON(),c.where("url","".concat(t)).find().then((function(e){r(e[0])}),(function(e){a(e)}))}))},client:S},E=n(1);function C(e){var t=e.amazon_link,n=e.book_author,r=e.book_cover,a=e.book_description,c=e.book_pages,o=e.book_title,i=e.pageNum,l=e.url;return Object(E.jsxs)("div",{style:{display:"flex",marginBottom:50},children:[Object(E.jsxs)("div",{className:"cards",children:[Object(E.jsxs)(s.b,{to:{pathname:l,state:{pageNum:i}},children:[Object(E.jsx)("img",{src:r.url,alt:o,width:100}),Object(E.jsx)("h3",{children:o})]}),Object(E.jsxs)("span",{children:["Author(s): ",n]}),Object(E.jsxs)("span",{style:{marginBottom:20},children:[c," pages"]}),Object(E.jsx)("a",{href:t.href,children:"Buy this book on Amazon"})]}),Object(E.jsx)("p",{className:"cards",children:a})]})}var N=n(52),A=n.n(N);function T(e){var t,n,r=e.footer;return Object(E.jsxs)("footer",{children:[Object(E.jsxs)("div",{className:"max-width footer-div",children:[Object(E.jsx)("div",{className:"col-quarter",children:Object(E.jsx)(s.b,{to:"/",children:r.logo&&Object(E.jsx)("img",{src:r.logo.url,alt:"contentstack logo",title:"contentstack",className:"logo footer-logo"})})}),Object(E.jsx)("div",{className:"col-half",children:Object(E.jsx)("nav",{children:Object(E.jsx)("ul",{className:"nav-ul",children:null===(t=r.navigation.link)||void 0===t?void 0:t.map((function(e){return Object(E.jsx)("li",{className:"footer-nav-li",children:Object(E.jsx)(s.b,{to:e.href,children:e.title})},e.title)}))})})}),Object(E.jsx)("div",{className:"col-quarter social-link",children:Object(E.jsx)("div",{className:"social-nav",children:null===(n=r.social.social_share)||void 0===n?void 0:n.map((function(e){return Object(E.jsx)("a",{href:e.link.href,title:e.link.title,children:Object(E.jsx)("img",{src:e.icon.url,alt:"social icon"})},e.link.title)}))})})]}),Object(E.jsx)("div",{className:"copyright",children:A()(r.copyright)})]})}function P(e){var t=e.footer,n=e.children;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("main",{children:n}),t?Object(E.jsx)(T,{footer:t}):""]})}var w=function(e){var t=e.history,n=e.location.state,r=(n=void 0===n?{}:n).pageNum,c=void 0===r?1:r,o=Object(a.useState)(c),s=Object(b.a)(o,2),l=s[0],d=s[1],O=Object(a.useState)(0),h=Object(b.a)(O,2),p=h[0],f=h[1],v=Object(a.useState)(),x=Object(b.a)(v,2),_=x[0],m=x[1],k=Object(a.useState)({errorStatus:!1,errorCode:void 0,errorData:void 0}),g=Object(b.a)(k,2),S=g[0],N=g[1];function A(){return(A=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getAllBooks(5*l);case 3:t=e.sent,n=t.data.all_book_page.items,d(l+1),m(n),N((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),N({errorStatus:!0,errorCode:404,errorData:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function T(){return(T=Object(j.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.max(1,l-1),e.prev=1,e.next=4,y.getAllBooks(5*(t-1));case 4:n=e.sent,r=n.data.all_book_page.items,d(t),m(r),N((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),N({errorStatus:!0,errorCode:404,errorData:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(a.useEffect)(Object(j.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getAllBooks(5*(l-1));case 3:t=e.sent,n=t.data.all_book_page,r=n.items,a=n.total,m(r),f(Number(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),N({errorStatus:!0,errorCode:404,errorData:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l]),S.errorStatus?(S.errorStatus&&t.push("/error",[S]),""):_?Object(E.jsxs)(P,{children:[Object(E.jsx)("ul",{style:{listStyle:"none"},children:null===_||void 0===_?void 0:_.map((function(e){var t=e.book_data,n=e.url,r=e.system.uid,a=Object(i.a)(Object(i.a)({},t),{},{uid:r,pageNum:l,book_cover:t.book_coverConnection.edges[0].node});return Object(E.jsx)("li",{children:Object(E.jsx)(C,Object(i.a)(Object(i.a)({},a),{},{url:n}))},t.book_title)}))}),Object(E.jsxs)("div",{style:{width:300,padding:50,margin:"0 auto",display:"flex"},children:[Object(E.jsx)("button",{onClick:function(){return T.apply(this,arguments)},style:{flexBasis:"50%"},disabled:1===l,children:"Previous"}),Object(E.jsx)("button",{onClick:function(){return A.apply(this,arguments)},style:{flexBasis:"50%"},disabled:p-5*l<=0,children:"Next"})]})]}):Object(E.jsx)("div",{children:"Loading..."})};function R(e){console.log(e);var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)({errorStatus:!1,errorCode:void 0,errorData:void 0}),i=Object(b.a)(o,2),l=i[0],d=i[1];if(Object(a.useEffect)(Object(j.a)(u.a.mark((function t(){var n,r,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.url,t.prev=1,t.next=4,y.getEntryByUrl("book_page",n);case 4:r=t.sent,a=Object(b.a)(r,1),o=a[0].book_data,c(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),d({errorStatus:!0,errorCode:404,errorData:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),[]),l.errorStatus)return Object(E.jsx)("div",{children:"Something went wrong"});if(!r)return Object(E.jsx)("div",{children:"Loading..."});var O=r.amazon_link,h=r.book_author,p=r.book_cover,f=r.book_description,v=r.book_pages,x=r.book_title,_=e.location.state.pageNum;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"btn-wrapper",children:Object(E.jsx)(s.b,{to:{pathname:"/",state:{pageNum:_}},className:"btn primary-btn",children:"Back"})}),Object(E.jsxs)("div",{style:{margin:"0 auto",width:"80%",display:"flex",flexDirection:"column"},children:[Object(E.jsx)("h1",{children:x}),Object(E.jsxs)("div",{style:{display:"flex"},children:[Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingRight:50},children:[Object(E.jsx)("img",{src:p.url,alt:x,width:250}),Object(E.jsxs)("span",{children:["Author(s): ",h]}),Object(E.jsxs)("span",{children:[v," pages"]})]}),Object(E.jsxs)("div",{style:{flexBasis:"30%"},children:[Object(E.jsx)("p",{children:f}),Object(E.jsx)("a",{href:O.href,children:"Buy this book on Amazon"})]})]})]})]})}n(114),n(115);var D=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(l.c,{children:[Object(E.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(E.jsx)(w,Object(i.a)({},e))}}),Object(E.jsx)(l.a,{exact:!0,path:"/:id",render:function(e){return Object(E.jsx)(R,Object(i.a)({},e))}})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(E.jsx)(s.a,{basename:"/",children:Object(E.jsx)(D,{})}),document.getElementById("root")),B()},96:function(e,t){}},[[117,1,2]]]);
//# sourceMappingURL=main.78f89634.chunk.js.map