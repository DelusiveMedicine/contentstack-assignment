(this["webpackJsonpcontentstack-react-starter-app"]=this["webpackJsonpcontentstack-react-starter-app"]||[]).push([[0],{114:function(e,t,r){},115:function(e,t,r){},117:function(e,t,r){"use strict";r.r(t);var n,a=r(0),c=r(49),o=r.n(c),s=r(10),i=r(9),l=r(3),d=r(12),u=r.n(d),j=r(17),b=r(5),h=r(50),p=r(62).Stack({api_key:"bltf9720f7949da78d3",delivery_token:"cs4d71fdc649f544913a7a723d",environment:"dev"}),O=r(116),x=O.ApolloClient,f=O.InMemoryCache,v=O.HttpLink,m=O.from,k=O.gql,g="https://graphql.contentstack.com/stacks/".concat("bltf9720f7949da78d3","?environment=").concat("dev"),y=new f,_=new x({link:m([new v({uri:g,headers:{access_token:"cs4d71fdc649f544913a7a723d"}})]),cache:y});var w={getAllBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _.query({query:k(n||(n=Object(h.a)(["query {\n      all_book_page(limit: 5, skip: ",", order_by: created_at_ASC) {\n        total\n        items {\n          book_data {\n            amazon_link {\n              href\n            }\n            book_author\n            book_description\n            book_pages\n            book_title\n            book_coverConnection {\n              edges {\n                node {\n                  url\n                }\n              }\n            }\n          }\n          url\n          system {\n            uid\n          }\n        }\n      }\n    }\n    "])),e)})},getEntryByUrl:function(e,t,r){return new Promise((function(n,a){var c=p.ContentType(e).Query();r&&c.includeReference(r),c.includeOwner().toJSON(),c.where("url","".concat(t)).find().then((function(e){n(e[0])}),(function(e){a(e)}))}))},client:_},N=r(1);function S(e){var t=e.amazon_link,r=e.book_author,n=e.book_cover,a=e.book_description,c=e.book_pages,o=e.book_title,i=e.pageNum,l=e.url;return Object(N.jsxs)("div",{style:{display:"flex",marginBottom:50},children:[Object(N.jsxs)("div",{className:"cards",children:[Object(N.jsxs)(s.b,{to:{pathname:l,state:{pageNum:i}},children:[Object(N.jsx)("img",{src:n.url,alt:o,width:100}),Object(N.jsx)("h3",{children:o})]}),Object(N.jsxs)("span",{children:["Author(s): ",r]}),Object(N.jsxs)("span",{style:{marginBottom:20},children:[c," pages"]}),Object(N.jsx)("a",{href:t.href,children:"Buy this book on Amazon"})]}),Object(N.jsx)("p",{className:"cards",children:a})]})}var C=r(52),B=r.n(C);function A(e){var t,r,n=e.footer;return Object(N.jsxs)("footer",{children:[Object(N.jsxs)("div",{className:"max-width footer-div",children:[Object(N.jsx)("div",{className:"col-quarter",children:Object(N.jsx)(s.b,{to:"/",children:n.logo&&Object(N.jsx)("img",{src:n.logo.url,alt:"contentstack logo",title:"contentstack",className:"logo footer-logo"})})}),Object(N.jsx)("div",{className:"col-half",children:Object(N.jsx)("nav",{children:Object(N.jsx)("ul",{className:"nav-ul",children:null===(t=n.navigation.link)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("li",{className:"footer-nav-li",children:Object(N.jsx)(s.b,{to:e.href,children:e.title})},e.title)}))})})}),Object(N.jsx)("div",{className:"col-quarter social-link",children:Object(N.jsx)("div",{className:"social-nav",children:null===(r=n.social.social_share)||void 0===r?void 0:r.map((function(e){return Object(N.jsx)("a",{href:e.link.href,title:e.link.title,children:Object(N.jsx)("img",{src:e.icon.url,alt:"social icon"})},e.link.title)}))})})]}),Object(N.jsx)("div",{className:"copyright",children:B()(n.copyright)})]})}function D(e){var t=e.footer,r=e.children;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("main",{children:r}),t?Object(N.jsx)(A,{footer:t}):""]})}var q=function(e){var t=e.history,r=e.location.state,n=(r=void 0===r?{}:r).pageNum,c=void 0===n?1:n,o=Object(a.useState)(c),s=Object(b.a)(o,2),l=s[0],d=s[1],h=Object(a.useState)(0),p=Object(b.a)(h,2),O=p[0],x=p[1],f=Object(a.useState)(),v=Object(b.a)(f,2),m=v[0],k=v[1],g=Object(a.useState)({errorStatus:!1,errorCode:void 0,errorData:void 0}),y=Object(b.a)(g,2),_=y[0],C=y[1];function B(){return(B=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllBooks(5*l);case 3:t=e.sent,r=t.data.all_book_page.items,d(l+1),k(r),C((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),C({errorStatus:!0,errorCode:404,errorData:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function A(){return(A=Object(j.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.max(1,l-1),e.prev=1,e.next=4,w.getAllBooks(5*(t-1));case 4:r=e.sent,n=r.data.all_book_page.items,d(t),k(n),C((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),C({errorStatus:!0,errorCode:404,errorData:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(a.useEffect)(Object(j.a)(u.a.mark((function e(){var t,r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllBooks(5*(l-1));case 3:t=e.sent,r=t.data.all_book_page,n=r.items,a=r.total,k(n),x(Number(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C({errorStatus:!0,errorCode:404,errorData:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l]),_.errorStatus?(_.errorStatus&&t.push("/error",[_]),""):m?Object(N.jsxs)(D,{children:[Object(N.jsx)("ul",{style:{listStyle:"none"},children:null===m||void 0===m?void 0:m.map((function(e){var t=e.book_data,r=e.url,n=e.system.uid,a=Object(i.a)(Object(i.a)({},t),{},{uid:n,pageNum:l,book_cover:t.book_coverConnection.edges[0].node});return Object(N.jsx)("li",{children:Object(N.jsx)(S,Object(i.a)(Object(i.a)({},a),{},{url:r}))},t.book_title)}))}),Object(N.jsxs)("div",{style:{width:300,padding:50,margin:"0 auto",display:"flex"},children:[Object(N.jsx)("button",{onClick:function(){return A.apply(this,arguments)},style:{flexBasis:"50%"},disabled:1===l,children:"Previous"}),Object(N.jsx)("button",{onClick:function(){return B.apply(this,arguments)},style:{flexBasis:"50%"},disabled:O-5*l<=0,children:"Next"})]})]}):Object(N.jsx)("div",{children:"Loading..."})};function F(e){var t=Object(a.useState)(),r=Object(b.a)(t,2),n=r[0],c=r[1],o=Object(a.useState)({errorStatus:!1,errorCode:void 0,errorData:void 0}),i=Object(b.a)(o,2),l=i[0],d=i[1];if(Object(a.useEffect)(Object(j.a)(u.a.mark((function t(){var r,n,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.match.url,t.prev=1,t.next=4,w.getEntryByUrl("book_page",r);case 4:n=t.sent,a=Object(b.a)(n,1),o=a[0].book_data,c(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),d({errorStatus:!0,errorCode:404,errorData:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),[]),l.errorStatus)return Object(N.jsx)("div",{children:"Something went wrong"});if(!n)return Object(N.jsx)("div",{children:"Loading..."});var h=n.amazon_link,p=n.book_author,O=n.book_cover,x=n.book_description,f=n.book_pages,v=n.book_title,m=e.location.state.pageNum;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"btn-wrapper",children:Object(N.jsx)(s.b,{to:{pathname:"/",state:{pageNum:m}},className:"btn primary-btn",children:"Back"})}),Object(N.jsxs)("div",{style:{margin:"0 auto",width:"80%",display:"flex",flexDirection:"column"},children:[Object(N.jsx)("h1",{children:v}),Object(N.jsxs)("div",{style:{display:"flex"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingRight:50},children:[Object(N.jsx)("img",{src:O.url,alt:v,width:250}),Object(N.jsxs)("span",{children:["Author(s): ",p]}),Object(N.jsxs)("span",{children:[f," pages"]})]}),Object(N.jsxs)("div",{style:{flexBasis:"30%"},children:[Object(N.jsx)("p",{children:x}),Object(N.jsx)("a",{href:h.href,children:"Buy this book on Amazon"})]})]})]})]})}r(114),r(115);var z=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(l.c,{children:[Object(N.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(N.jsx)(q,Object(i.a)({},e))}}),Object(N.jsx)(l.a,{exact:!0,path:"/:id",render:function(e){return Object(N.jsx)(F,Object(i.a)({},e))}})]})})},E=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,119)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(N.jsx)(s.a,{children:Object(N.jsx)(z,{})}),document.getElementById("root")),E()},96:function(e,t){}},[[117,1,2]]]);
//# sourceMappingURL=main.3138a2bd.chunk.js.map